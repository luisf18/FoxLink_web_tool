<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Exemplo - Gráfico Multi Variáveis</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            padding: 20px;
        }

        .card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            width: 700px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        canvas {
            border: 1px solid #ccc;
            background: #fff;
        }

        .controls {
            margin-top: 10px;
        }

        button {
            padding: 6px 12px;
            margin-right: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="card">
    <h2>Gráfico Multi Variáveis</h2>

    <canvas id="grafico" width="660" height="400"></canvas>

    <canvas id="grafico2" width="660" height="200"></canvas>

    <div class="controls">
        <button id="btn-fix">Escala Fixa (0–20)</button>
        <button id="btn-auto">Escala Automática</button>
    </div>
</div>

<script type="module" >

    import { MultiLineGraph } from "./js/graph.js";

const canvas = document.getElementById("grafico");
const canvas2 = document.getElementById("grafico2");

document.getElementById("btn-fix").addEventListener("click", setFixedScale);
document.getElementById("btn-auto").addEventListener("click", setAutoScale);

const graph = new MultiLineGraph(canvas, {
    points: 60,
    autoScale: false,
    min: 0,
    max: 20,
    variables: [
        { name: "Sensor A", color: "blue" },
        { name: "Sensor B", color: "red" },
        { name: "Sensor C", color: "green" }
    ]
});

const graph2 = new MultiLineGraph(canvas2, {
    points: 10,
    autoScale: true,
    min: 0,
    max: 20,
    variables: [
        { name: "Sensor A", color: "blue" }
    ],
    hideLegend: true,
    hideYAxis: true
});

function setFixedScale() {
    graph.setScale(-40, 99);
    graph2.setScale(-40, 99);
}

function setAutoScale() {
    graph.setAutoScale(true);
    graph2.setAutoScale(true);
}

// Simulação de dados
setInterval(() => {
    //graph.addValue(0,3);
    //graph.addValue(1,3);
    //graph.addValue(2,3);
    graph.addValue(0,Math.sin(Math.random() * 20));
    graph.addValue(1,Math.sin(Math.random() * 15));
    graph.addValue(2,Math.sin(Math.random() * 10));
    graph.update();

    graph2.addValue(0,15*Math.sin(Math.random() * 20));
    graph2.update();
}, 100);

</script>

</body>
</html>
